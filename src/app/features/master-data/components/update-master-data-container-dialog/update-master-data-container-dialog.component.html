<p-dialog
  [header]="'Update ' + selectedContainerToUpdate()?.dataname + ' ?'"
  [modal]="true"
  [(visible)]="updateDialogVisibility"
  [style]="{ width: '30rem' }"
  [breakpoints]="{ '1199px': '35vw', '575px': '90vw' }"
  (onHide)="resetForm()"
>
  <form
    [formGroup]="updateMasterDataContainerForm"
    class="mt-2 flex grow flex-col items-start gap-4 pb-8"
  >
    <p class="-mt-2 text-[14px] text-gray-500">
      Hint: for now you can only update name and description
    </p>
    <div class="flex w-full flex-col gap-2">
      <label for="name">Name</label>
      <input
        id="name"
        type="text"
        pInputText
        formControlName="name"
        placeholder="Enter container name"
        variant="filled"
      />
      @if(updateMasterDataContainerForm.getError('name')?.invalid &&
      updateMasterDataContainerForm.getError('name')?.touched) {
      <small class="text-red-500"> Name is required </small>
      }
    </div>

    <div class="flex w-full flex-col gap-2">
      <label for="description">Description</label>
      <textarea
        id="description"
        type="text"
        pInputTextarea
        formControlName="description"
        placeholder="Enter container description"
        variant="filled"
      ></textarea>
      @if(updateMasterDataContainerForm.getError('description')?.invalid &&
      updateMasterDataContainerForm.getError('description')?.touched) {
      <small class="text-red-500"> Description is required </small>
      }
    </div>
    <!-- TODO: Consider later -->
    <!-- 
    <p>Fields</p>
    @for (customField of customFields(); track customField.id) {
    <div class="flex w-full flex-col gap-2">
      <div class="flex items-center gap-2">
        <input
          [id]="customField.id"
          type="text"
          pInputText
          [formControlName]="customField.id"
          placeholder="Enter label"
          variant="filled"
          class="w-full"
        />
        <button type="button" (click)="removeCustomField(customField.id)">
          <iconify-icon
            icon="lucide:circle-x"
            class="text-[1.5rem] text-red-500"
          ></iconify-icon>
        </button>
      </div>
      @if(updateMasterDataContainerForm.getError(customField.id)?.invalid &&
      updateMasterDataContainerForm.getError(customField.id)?.touched) {
      <small class="text-red-500"> Please fill </small>
      }
    </div>
    }
    <p-button (click)="addCustomField()" severity="secondary">
      <span>New Field</span>
      <iconify-icon
        icon="lucide:plus"
        class="ml-2 text-[1.5rem]"
      ></iconify-icon>
    </p-button> -->
  </form>
  <ng-template pTemplate="footer">
    <div class="flex items-center justify-end gap-4">
      <p-button
        type="button"
        (onClick)="cancelAdding()"
        severity="secondary"
        [outlined]="true"
      >
        Cancel
      </p-button>
      <p-button
        [disabled]="updateMasterDataContainerForm.invalid"
        type="submit"
        (onClick)="onSubmit()"
        [loading]="saving()"
        styleClass="flex items-center gap-2"
      >
        {{
          updateMasterDataContainerForm.valid
            ? saving()
              ? "Please wait"
              : "Add"
            : "Please fill all the fields"
        }}
      </p-button>
    </div>
  </ng-template>
</p-dialog>
<p-toast />
